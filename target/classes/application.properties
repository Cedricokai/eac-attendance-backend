# ===== APPLICATION SETTINGS =====
spring.application.name=Eac-Attendance

# ===== RAILWAY POSTGRESQL (PRODUCTION) =====
# Railway auto-injects DATABASE_URL (combines user/pass/url)
spring.datasource.url=${DATABASE_URL}
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# ===== JPA/HIBERNATE =====
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# ===== CORS (REST API) =====
# Allowed origins (GitHub Pages + Railway preview URL)
spring.mvc.cors.allowed-origins=https://cedricokai.github.io,https://eac-attendance-production.up.railway.app
spring.mvc.cors.allowed-methods=GET,POST,PUT,DELETE
spring.mvc.cors.allowed-headers=*
spring.mvc.cors.allow-credentials=true

# ===== WEBSOCKET/SOCKJS =====
websocket.endpoint=/ws
websocket.allowed-origins=https://cedricokai.github.io

# ===== SERVER CONFIG =====
server.port=${PORT:8080}  # Railway uses dynamic $PORT
server.forward-headers-strategy=framework  # For Railway's proxy

# ===== LOCAL DEVELOPMENT PROFILE (MYSQL) =====
---
spring.config.activate.on-profile=dev
# Database
spring.datasource.url=jdbc:mysql://localhost:3306/eac_attendance?useSSL=false&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=Cedkeys@22
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
# CORS/WebSocket (local frontend)
spring.mvc.cors.allowed-origins=http://localhost:5173,https://localhost:5173
websocket.allowed-origins=http://localhost:5173,https://localhost:5173